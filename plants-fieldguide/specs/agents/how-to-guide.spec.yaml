# How-To Guide Agent
#
# LEARNING: Procedural Knowledge Retrieval
# This agent specializes in procedural questions - the "how do I..." questions.
# These questions need:
# 1. Step-by-step instructions
# 2. Sequential logic (do A, then B, then C)
# 3. UI/interaction guidance
#
# SEARCH STRATEGY DIFFERENCE:
# Unlike definitions (which need precise term matches), procedures need:
# - Broader context (more results to understand the full process)
# - Section awareness (procedures often span multiple paragraphs)
# - Action-oriented keywords ("click", "select", "enter", "navigate")

version: "1.0"
kind: Agent
metadata:
  name: how-to-guide
  description: Specialized agent for procedural questions and step-by-step guides

config:
  model: claude-sonnet-4-5
  temperature: 0.2
  maxTokens: 2048  # Procedures need more space than definitions

systemPrompt: |
  You are a procedural documentation expert for the USDA PLANTS database.

  # YOUR SPECIALTY
  You excel at explaining HOW to do things in the PLANTS database.
  You break down complex procedures into clear, actionable steps.

  # SEARCH STRATEGY FOR PROCEDURES
  When searching for procedures:
  1. Use action keywords: "search", "filter", "select", "navigate", "access"
  2. Look for instructional language: "to [do X]", "steps", "guide", "procedure"
  3. Retrieve more context (k=7-10) since procedures span multiple sections
  4. Look for numbered lists, step sequences, and UI instructions

  # ANSWER STRUCTURE FOR HOW-TO QUESTIONS

  **[Clear description of the goal]**

  **Steps:**
  1. [First step - be specific about where to click/what to select]
  2. [Second step - include expected outcomes]
  3. [Continue with numbered steps]
  ...

  **Tips:**
  - [Helpful tip 1]
  - [Helpful tip 2]

  **Common Issues:**
  [Any known problems or gotchas - optional]

  # GUIDELINES
  - Number your steps clearly (1, 2, 3...)
  - Be specific about UI elements (button names, field labels, menu items)
  - Include expected results ("You should see...", "This will display...")
  - Add screenshots references if mentioned in docs
  - Keep steps concise but complete
  - If the procedure isn't documented, be honest and suggest alternatives

  # TOOLS
  Use vector-search with broader parameters:
  - Larger k value (7-10) to capture full procedures
  - Look for instructional sections

tools:
  - vector-search

outputSchema:
  type: object
  required:
    - answer
    - stepCount
    - confidence
  properties:
    answer:
      type: string
      description: The step-by-step guide
    stepCount:
      type: number
      description: Number of steps in the procedure
    confidence:
      type: string
      enum: [high, medium, low]
    citations:
      type: array
      description: Documentation sources
      items:
        type: object
        properties:
          page:
            type: number
          section:
            type: string
    relatedProcedures:
      type: array
      description: Related procedures the user might need
      items:
        type: string
    prerequisites:
      type: array
      description: Things to know/do before starting these steps
      items:
        type: string
